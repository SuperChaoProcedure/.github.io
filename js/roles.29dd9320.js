(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["roles"],{"1dde":function(e,t,r){var a=r("d039"),n=r("b622"),s=r("2d00"),i=n("species");e.exports=function(e){return s>=51||!a((function(){var t=[],r=t.constructor={};return r[i]=function(){return{foo:1}},1!==t[e](Boolean).foo}))}},"375c":function(e,t,r){"use strict";var a=r("3d86"),n=r.n(a);n.a},"3d86":function(e,t,r){},8418:function(e,t,r){"use strict";var a=r("c04e"),n=r("9bf2"),s=r("5c6c");e.exports=function(e,t,r){var i=a(t);i in e?n.f(e,i,s(0,r)):e[i]=r}},"99af":function(e,t,r){"use strict";var a=r("23e7"),n=r("d039"),s=r("e8b5"),i=r("861d"),o=r("7b0b"),l=r("50c4"),c=r("8418"),u=r("65f0"),d=r("1dde"),m=r("b622"),f=r("2d00"),p=m("isConcatSpreadable"),b=9007199254740991,g="Maximum allowed index exceeded",h=f>=51||!n((function(){var e=[];return e[p]=!1,e.concat()[0]!==e})),v=d("concat"),k=function(e){if(!i(e))return!1;var t=e[p];return void 0!==t?!!t:s(e)},w=!h||!v;a({target:"Array",proto:!0,forced:w},{concat:function(e){var t,r,a,n,s,i=o(this),d=u(i,0),m=0;for(t=-1,a=arguments.length;t<a;t++)if(s=-1===t?i:arguments[t],k(s)){if(n=l(s.length),m+n>b)throw TypeError(g);for(r=0;r<n;r++,m++)r in s&&c(d,m,s[r])}else{if(m>=b)throw TypeError(g);c(d,m++,s)}return d.length=m,d}})},a15b:function(e,t,r){"use strict";var a=r("23e7"),n=r("44ad"),s=r("fc6a"),i=r("a640"),o=[].join,l=n!=Object,c=i("join",",");a({target:"Array",proto:!0,forced:l||!c},{join:function(e){return o.call(s(this),void 0===e?",":e)}})},f12c:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-breadcrumb",{attrs:{separator:">"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/welcome"}}},[e._v("首页")]),r("el-breadcrumb-item",[e._v("用户管理")]),r("el-breadcrumb-item",[e._v("用户列表")])],1),r("el-card",[r("el-button",{attrs:{type:"primary"},on:{click:function(t){e.addDialogVisible=!0}}},[e._v("添加角色")]),r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.rolesList,border:"",stripe:""}},[r("el-table-column",{attrs:{type:"expand",label:"展开",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.children,(function(a){return r("el-row",{key:a.id,staticClass:"level1"},[r("el-col",{attrs:{span:5}},[r("el-tag",{attrs:{closable:""}},[e._v(e._s(a.authName))]),r("i",{staticClass:"el-icon-caret-right"})],1),r("el-col",{attrs:{span:19}},e._l(a.children,(function(a){return r("el-row",{key:a.id},[r("el-col",{attrs:{span:5}},[r("el-tag",{attrs:{closable:"",type:"success"}},[e._v(e._s(a.authName))]),r("i",{staticClass:"el-icon-caret-right"})],1),r("el-col",{attrs:{span:19}},e._l(a.children,(function(a){return r("el-tag",{key:a.id,attrs:{type:"warning",closable:""},on:{close:function(r){return e.closeTag(t.row,a.id)}}},[e._v(e._s(a.authName))])})),1)],1)})),1)],1)}))}}])}),r("el-table-column",{attrs:{type:"index",label:"#",width:"180"}}),r("el-table-column",{attrs:{prop:"roleName",label:"角色名称",width:"180"}}),r("el-table-column",{attrs:{prop:"roleDesc",label:"角色描述",width:"180"}}),r("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"mini"},on:{click:function(r){return e.editUsers(t.row)}}}),r("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini"},on:{click:function(r){return e.delUsers(t.row)}}}),r("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"分配角色",placement:"top"}},[r("el-button",{attrs:{type:"warning",icon:"el-icon-setting",size:"mini"},on:{click:function(r){return e.rightsAllot(t.row)}}},[e._v("分配权限")])],1)]}}])})],1)],1),r("el-dialog",{attrs:{title:"提示",visible:e.addDialogVisible,width:"30%"},on:{"update:visible":function(t){e.addDialogVisible=t}}},[r("el-form",{ref:"form",attrs:{model:e.addForm,"label-width":"80px"}},[r("el-form-item",{attrs:{label:"角色名称:"}},[r("el-input",{model:{value:e.addForm.roleName,callback:function(t){e.$set(e.addForm,"roleName",t)},expression:"addForm.roleName"}})],1),r("el-form-item",{attrs:{label:"角色描述:"}},[r("el-input",{nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.addUsers(t)}},model:{value:e.addForm.roleDesc,callback:function(t){e.$set(e.addForm,"roleDesc",t)},expression:"addForm.roleDesc"}})],1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.addDialogVisible=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.addUsers}},[e._v("确 定")])],1)],1),r("el-dialog",{attrs:{title:"提示",visible:e.editDialogVisible,width:"30%"},on:{"update:visible":function(t){e.editDialogVisible=t}}},[r("el-form",{ref:"form",attrs:{model:e.editForm,"label-width":"80px"}},[r("el-form-item",{attrs:{label:"角色名称:"}},[r("el-input",{model:{value:e.editForm.roleName,callback:function(t){e.$set(e.editForm,"roleName",t)},expression:"editForm.roleName"}})],1),r("el-form-item",{attrs:{label:"角色描述:"}},[r("el-input",{nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.editSure(t)}},model:{value:e.editForm.roleDesc,callback:function(t){e.$set(e.editForm,"roleDesc",t)},expression:"editForm.roleDesc"}})],1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.editDialogVisible=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.editSure}},[e._v("确 定")])],1)],1),r("el-dialog",{attrs:{title:"提示",visible:e.AllotDialogVisible,width:"30%"},on:{"update:visible":function(t){e.AllotDialogVisible=t}}},[r("el-tree",{ref:"tree",attrs:{data:e.TreeData,"show-checkbox":"","default-expand-all":"","node-key":"id","default-checked-keys":e.expandArr,"highlight-current":"",props:{children:"children",label:"authName"}}}),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.AllotDialogVisible=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.rightsUsers}},[e._v("确 定")])],1)],1)],1)},n=[],s=(r("99af"),r("4160"),r("a15b"),r("159b"),r("96cf"),r("1da1")),i={created:function(){this.getRolesList()},data:function(){return{rolesList:[],addDialogVisible:!1,addForm:{roleName:"",roleDesc:""},editForm:{roleName:"",roleDesc:""},editDialogVisible:!1,roleId:"",AllotDialogVisible:!1,TreeData:[],expandArr:[]}},methods:{getRolesList:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("roles");case 2:if(r=t.sent,200===r.meta.status){t.next=5;break}return t.abrupt("return",e.$message.error(r.meta.msg));case 5:e.rolesList=r.data;case 6:case"end":return t.stop()}}),t)})))()},addUsers:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.post("roles",e.addForm);case 2:if(r=t.sent,201===r.meta.status){t.next=5;break}return t.abrupt("return",e.$message.error(r.meta.msg));case 5:e.$message.success(r.meta.msg),e.getRolesList(),e.addDialogVisible=!1;case 8:case"end":return t.stop()}}),t)})))()},closeTag:function(e,t){var r=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){var n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,r.$http.delete("roles/".concat(e.id,"/rights/").concat(t));case 2:if(n=a.sent,200===n.meta.status){a.next=5;break}return a.abrupt("return",r.$message.error(n.meta.msg));case 5:r.$message.success(n.meta.msg),e.children=n.data;case 7:case"end":return a.stop()}}),a)})))()},delUsers:function(e){var t=this;this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(s["a"])(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,t.$http.delete("roles/".concat(e.id));case 2:if(a=r.sent,200===a.meta.status){r.next=5;break}return r.abrupt("return",t.$message.error(a.meta.msg));case 5:t.$message.success(a.meta.msg),t.getRolesList();case 7:case"end":return r.stop()}}),r)})))).catch((function(){t.$message({type:"info",message:"已取消删除"})}))},editUsers:function(e){this.roleId=e.id,this.editForm.roleDesc=e.roleDesc,this.editForm.roleName=e.roleName,this.editDialogVisible=!0},editSure:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.put("roles/".concat(e.roleId),e.editForm);case 2:if(r=t.sent,200===r.meta.status){t.next=5;break}return t.abrupt("return",e.$message.error(r.meta.msg));case 5:e.$message.success(r.meta.msg),e.getRolesList(),e.editDialogVisible=!1;case 8:case"end":return t.stop()}}),t)})))()},rightsAllot:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return t.roleId=e.id,t.expandArr=[],r.next=4,t.$http.get("rights/tree");case 4:if(a=r.sent,200===a.meta.status){r.next=7;break}return r.abrupt("return",t.$message.error(a.meta.msg));case 7:t.TreeData=a.data,e.children.forEach((function(e){e.children.forEach((function(e){e.children.forEach((function(e){t.expandArr.push(e.id)}))}))})),t.AllotDialogVisible=!0;case 10:case"end":return r.stop()}}),r)})))()},rightsUsers:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=[].concat(e.$refs.tree.getHalfCheckedKeys(),e.$refs.tree.getCheckedKeys()).join(","),t.next=5,e.$http.post("roles/".concat(e.roleId,"/rights"),{rids:r});case 5:if(a=t.sent,200===a.meta.status){t.next=8;break}return t.abrupt("return",e.$message.error(a.meta.msg));case 8:e.$message.success(a.meta.msg),e.getRolesList();case 10:case"end":return t.stop()}}),t)})))()}}},o=i,l=(r("375c"),r("2877")),c=Object(l["a"])(o,a,n,!1,null,"c012758a",null);t["default"]=c.exports}}]);